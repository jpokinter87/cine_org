{% extends "base.html" %}

{% block title %}CineOrg — Validation{% endblock %}
{% block nav_validation %}active{% endblock %}

{% block content %}
<section class="hero">
    <h1 class="hero-title">Validation</h1>
    <p class="hero-subtitle">{{ total }} fichier{{ 's' if total != 1 else '' }} en attente</p>
</section>

{% if items %}
<section class="pending-list">
    {% for item in items %}
    <a href="/validation/{{ item.id }}" class="pending-card">
        <div class="pending-card-main">
            <span class="type-badge {{ 'badge-series' if item.is_series else 'badge-film' }}">
                {{ 'Série' if item.is_series else 'Film' }}
            </span>
            <span class="pending-filename" title="{{ item.filename }}">{{ item.filename }}</span>
        </div>
        <div class="pending-card-meta">
            <span class="pending-candidates">{{ item.candidate_count }} candidat{{ 's' if item.candidate_count != 1 else '' }}</span>
            <span class="score-badge {{ item.score_class }}">{{ "%.0f"|format(item.best_score) }}%</span>
        </div>
    </a>
    {% endfor %}
</section>
{% else %}
<section class="empty-state">
    <div class="empty-icon">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 11 12 14 22 4"/><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/></svg>
    </div>
    {% if has_validated %}
    <h2 class="empty-title">Tous les fichiers sont validés</h2>
    <p class="empty-text">Les fichiers validés sont prêts à être transférés.</p>
    <a href="/transfer" class="action-btn action-primary">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" width="16" height="16"><path d="M5 12h14"/><polyline points="12 5 19 12 12 19"/></svg>
        Passer au transfert
    </a>
    {% else %}
    <h2 class="empty-title">Aucun fichier en attente</h2>
    <p class="empty-text">Tous les fichiers ont été validés ou aucun workflow n'a été lancé.</p>
    <a href="/" class="action-btn action-secondary">Retour à l'accueil</a>
    {% endif %}
</section>
{% endif %}
{% endblock %}
